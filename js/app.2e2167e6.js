(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/minecolonies-companion/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var n=i("85ec"),r=i.n(n);r.a},"067f":function(e,t,i){},"22d7":function(e,t,i){"use strict";var n=i("be87"),r=i.n(n);r.a},"3e4a":function(e,t,i){"use strict";var n=i("aeff"),r=i.n(n);r.a},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("h2",[e._v("Citizens")]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.citizens.length<1,expression:"citizens.length < 1"}]},[e._v("Start by adding a citizen, click on the button below.")]),i("CitizenList",{directives:[{name:"show",rawName:"v-show",value:e.citizens.length>0,expression:"citizens.length > 0"}],attrs:{items:e.citizens}}),i("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.showNewCitizenForm(t)}}},[e._v("Add a citizen")]),e.isNewCitizenFormVisible?i("NewCitizenForm",{on:{close:function(t){e.isNewCitizenFormVisible=!1}}}):e._e(),null!==e.editedCitizen?i("EditCitizenForm",{attrs:{citizen:e.editedCitizen}}):e._e(),e.selectedCitizenForAssignment?i("JobAssignmentModal",{attrs:{"selected-citizen":e.selectedCitizenForAssignment,citizens:e.citizens},on:{close:function(t){return e.$store.dispatch("jobs/selectToAssign",null)}}}):e._e()],1)},a=[],s=i("5530"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"citizen-list"},[e._m(0),e._l(e.items,(function(e){return i("CitizenListItem",{key:e.id,attrs:{citizen:e}})}))],2)},l=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"citizen-list-header"},[i("li",{staticClass:"citizen-list-header-item mod-name"},[e._v("Citizen")]),i("li",{staticClass:"citizen-list-header-item mod-job"},[e._v("Job")]),i("li",{staticClass:"citizen-list-header-item mod-actions"})])}],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{staticClass:"citizen-list-item"},[i("p",{staticClass:"citizen-list-item-column mod-name"},[e._v(e._s(e.citizen.name))]),i("p",{staticClass:"citizen-list-item-column mod-job"},[e._v(e._s(e.jobTitle))]),i("div",{staticClass:"citizen-list-item-column mod-actions"},[i("button",{staticClass:"citizen-list-item-action",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$store.dispatch("jobs/selectToAssign",e.citizen.id)}}},[e._v("Assign")]),i("button",{staticClass:"citizen-list-item-action",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$store.dispatch("citizens/selectToEdit",e.citizen.id)}}},[e._v("Edit")]),i("button",{staticClass:"citizen-list-item-action",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.handleDelete(t)}}},[e._v("Delete")])])])},u=[],d=(i("b0c0"),i("96cf"),i("1da1")),m=i("d4ec"),f=i("bee2"),p=i("ade3"),b=function(){function e(t,i,n){Object(m["a"])(this,e),Object(p["a"])(this,"id",void 0),Object(p["a"])(this,"name",void 0),Object(p["a"])(this,"job",null),Object(p["a"])(this,"skills",{}),this.id=t,this.name=i,this.skills=n}return Object(f["a"])(e,[{key:"toJson",value:function(){return{name:this.name,job:this.job,skills:this.skills}}}],[{key:"fromJson",value:function(t){var i=new e(t.id,t.name,t.skills);return t.job&&(i.job=t.job),i}}]),e}(),v=(i("13d5"),i("dca8"),Object.freeze([{id:"baker",name:"Baker",skills:{primary:"knowledge",secondary:"dexterity"}},{id:"blacksmith",name:"Blacksmith",skills:{primary:"strength",secondary:"focus"}},{id:"builder",name:"Builder",skills:{primary:"adaptability",secondary:"athletics"}},{id:"chickenHerder",name:"Chicken Herder",skills:{primary:"adaptability",secondary:"agility"}},{id:"composter",name:"Composter",skills:{primary:"stamina",secondary:"athletics"}},{id:"cook",name:"Cook",skills:{primary:"adaptability",secondary:"knowledge"}},{id:"cowboy",name:"Cowboy",skills:{primary:"athletics",secondary:"stamina"}},{id:"crusher",name:"Crusher",skills:{primary:"stamina",secondary:"strength"}},{id:"deliveryman",name:"Deliveryman",skills:{primary:"agility",secondary:"adaptability"}},{id:"enchanter",name:"Enchanter",skills:{primary:"mana",secondary:"knowledge"}},{id:"farmer",name:"Farmer",skills:{primary:"stamina",secondary:"athletics"}},{id:"fisherman",name:"Fisherman",skills:{primary:"focus",secondary:"agility"}},{id:"florist",name:"Florist",skills:{primary:"dexterity",secondary:"agility"}},{id:"guard",name:"Guard",skills:{primary:"adaptability",secondary:"stamina"}},{id:"healer",name:"Healer",skills:{primary:"mana",secondary:"knowledge"}},{id:"libraryStudent",name:"Library Student",skills:{primary:"intelligence",secondary:null}},{id:"lumberjack",name:"Lumberjack",skills:{primary:"strength",secondary:"focus"}},{id:"miller",name:"Miller",skills:{primary:"knowledge",secondary:"dexterity"}},{id:"miner",name:"Miner",skills:{primary:"strength",secondary:"stamina"}},{id:"ranger",name:"Ranger",skills:{primary:"agility",secondary:"adaptability"}},{id:"shepherd",name:"Shepherd",skills:{primary:"focus",secondary:"strength"}},{id:"Sifter",name:"Sifter",skills:{primary:"focus",secondary:"strength"}},{id:"smelter",name:"Smelter",skills:{primary:"athletics",secondary:"strength"}},{id:"stonemason",name:"StoneMason",skills:{primary:"creativity",secondary:"dexterity"}},{id:"stoneSmelter",name:"Stone Smelter",skills:{primary:"athletics",secondary:"dexterity"}},{id:"swineHerder",name:"Swine Herder",skills:{primary:"strength",secondary:"athletics"}},{id:"universityStudent",name:"University Student",skills:{primary:"knowledge",secondary:"mana"}}])),y=v;function h(e){return v.reduce((function(t,i){return i.id===e?i:t}),null)}function k(e){return null!==h(e)}var z={name:"CitizenListItem",props:{citizen:{type:b,required:!0}},computed:{jobTitle:function(){if(!this.citizen.job)return"Unemployed";var e=h(this.citizen.job);return e?e.name:"Unemployed"}},methods:{handleDelete:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("Are you sure you want to delete ".concat(e.citizen.name,"?"))){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$store.dispatch("citizens/remove",e.citizen.id);case 4:case"end":return t.stop()}}),t)})))()}}},_=z,g=(i("3e4a"),i("2877")),C=Object(g["a"])(_,c,u,!1,null,"091ac418",null),j=C.exports,w={name:"CitizenList",components:{CitizenListItem:j},props:{items:{type:Array,required:!0}}},S=w,O=(i("e088"),Object(g["a"])(S,o,l,!1,null,"dd6562ec",null)),x=O.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{on:{close:e.closeForm},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("New citizen")]},proxy:!0},{key:"actions",fn:function(){return[i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.closeForm(t)}}},[e._v("Cancel")]),i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("Create citizen")])]},proxy:!0}])},[i("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("ul",[i("li",[i("label",{attrs:{for:"citizen_name"}},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newCitizen.name,expression:"newCitizen.name"},{name:"focus",rawName:"v-focus"}],attrs:{name:"name",id:"citizen_name",type:"text"},domProps:{value:e.newCitizen.name},on:{input:function(t){t.target.composing||e.$set(e.newCitizen,"name",t.target.value)}}})]),i("li",[i("label",{attrs:{for:"citizen_job"}},[e._v("Job")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.newCitizen.job,expression:"newCitizen.job"}],attrs:{name:"job",id:"citizen_job"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newCitizen,"job",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[e._v("Unemployed")]),e._l(e.jobs,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),i("li",[e._v("Skills: "),i("ul",e._l(e.skills,(function(t){return i("li",{key:t.id},[i("label",{attrs:{for:"citizen_skill_"+t.id}},[e._v(e._s(t.name))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newCitizen.skills[t.id],expression:"newCitizen.skills[skill.id]"}],attrs:{name:"skills["+t.id+"]",id:"citizen_skill_"+t.id,type:"number",min:"1"},domProps:{value:e.newCitizen.skills[t.id]},on:{input:function(i){i.target.composing||e.$set(e.newCitizen.skills,t.id,i.target.value)}}})])})),0)])]),i("button",{staticStyle:{display:"none"},attrs:{type:"submit"}})])])},I=[],A=(i("4160"),i("498a"),i("159b"),Object.freeze([{id:"athletics",name:"Athletics"},{id:"dexterity",name:"Dexterity"},{id:"strength",name:"Strength"},{id:"agility",name:"Agility"},{id:"stamina",name:"Stamina"},{id:"mana",name:"Mana"},{id:"adaptability",name:"Adaptability"},{id:"focus",name:"Focus"},{id:"creativity",name:"Creativity"},{id:"knowledge",name:"Knowledge"},{id:"intelligence",name:"Intelligence"}])),J=A;var $=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"modal"}},[i("article",{staticClass:"modal"},[i("div",{staticClass:"modal-overlay",on:{click:function(t){return t.preventDefault(),e.$emit("close")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.$emit("close")}}},[i("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[i("h2",{staticClass:"modal-title"},[e._t("header",[e._v("Default modal header")])],2),i("div",{staticClass:"modal-body"},[e._t("default",[i("p",[e._v("Default modal content")])])],2),i("div",{staticClass:"modal-action-list"},[e._t("actions",[i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("Close")])])],2)])])])])},E=[],N={name:"Modal"},P=N,D=(i("22d7"),Object(g["a"])(P,$,E,!1,null,null,null)),L=D.exports,M={name:"NewCitizenForm",components:{Modal:L},data:function(){return{newCitizen:this.getInitialState(),skills:J,jobs:y}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.newCitizen.name&&e.newCitizen.name.trim(),i){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$store.dispatch("citizens/add",{name:e.newCitizen.name,job:e.newCitizen.job,skills:e.newCitizen.skills});case 5:e.closeForm();case 6:case"end":return t.stop()}}),t)})))()},getInitialState:function(){var e={name:"",job:"",skills:{}};return J.forEach((function(t){e.skills[t.id]=1})),e},closeForm:function(){this.newCitizen=this.getInitialState(),this.$emit("close")}}},B=M,T=Object(g["a"])(B,F,I,!1,null,"c376e3c0",null),R=T.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{on:{close:e.closeForm},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Edit citizen: "+e._s(e.citizen.name))]},proxy:!0},{key:"actions",fn:function(){return[i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.closeForm(t)}}},[e._v("Cancel")]),i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[e._v("Save changes")])]},proxy:!0}])},[i("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[i("ul",[i("li",[i("label",{attrs:{for:"citizen_name"}},[e._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"},{name:"focus",rawName:"v-focus"}],attrs:{name:"name",id:"citizen_name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),i("li",[i("label",{attrs:{for:"citizen_job"}},[e._v("Job")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.job,expression:"job"}],attrs:{name:"job",id:"citizen_job"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.job=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[e._v("Unemployed")]),e._l(e.availableJobs,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),i("li",[e._v("Skills: "),i("ul",e._l(e.availableSkills,(function(t){return i("li",{key:t.id},[i("label",{attrs:{for:"citizen_skill_"+t.id}},[e._v(e._s(t.name))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.skills[t.id],expression:"skills[skill.id]"}],attrs:{name:"skills["+t.id+"]",id:"citizen_skill_"+t.id,type:"number",min:"1"},domProps:{value:e.skills[t.id]},on:{input:function(i){i.target.composing||e.$set(e.skills,t.id,i.target.value)}}})])})),0)])]),i("button",{staticStyle:{display:"none"},attrs:{type:"submit"}})])])},H=[],U={name:"EditCitizenForm",components:{Modal:L},data:function(){return{availableSkills:J,availableJobs:y,name:this.citizen.name,job:this.citizen.job||"",skills:Object.assign({},this.citizen.skills)}},props:{citizen:{type:b,required:!0}},methods:{handleSubmit:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.name&&e.name.trim(),i){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$store.dispatch("citizens/edit",{citizenId:e.citizen.id,name:e.name,job:e.job,skills:e.skills});case 5:e.closeForm();case 6:case"end":return t.stop()}}),t)})))()},closeForm:function(){this.$store.dispatch("citizens/selectToEdit",null)}}},V=U,G=Object(g["a"])(V,q,H,!1,null,"495330a0",null),W=G.exports,K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{class:"mod-fullpage",on:{close:e.closeForm},scopedSlots:e._u([{key:"header",fn:function(){return[e._v("Assignment: "+e._s(e.selectedCitizen.name))]},proxy:!0},{key:"actions",fn:function(){return[i("button",{staticClass:"modal-action-list-item",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.closeForm(t)}}},[e._v("Close")])]},proxy:!0}])},[i("table",{staticClass:"job-list"},[i("thead",[i("tr",[i("th",[e._v("Job")]),i("th",[e._v("Skills")]),i("th",[e._v("Score")]),i("th",[e._v("Other workers")]),i("th",[e._v("Actions")])])]),i("tbody",e._l(e.citizenJobs,(function(t){return i("tr",{key:t.id,class:{"current-job":e.selectedCitizen.job===t.id}},[i("th",{staticStyle:{"text-align":"left"}},[e._v(e._s(t.name))]),i("td",[e._v(" "+e._s(t.primarySkill)+": "+e._s(t.primarySkillLevel)+" "),t.secondarySkill?[i("br"),e._v(e._s(t.secondarySkill)+": "+e._s(t.secondarySkillLevel)+" ")]:e._e()],2),i("td",[e._v(e._s(t.getScore()))]),i("td",e._l(e.getWorkerForJob(e.findJobById(t.id)),(function(t){return i("div",{key:t.id},[e._v(" "+e._s(t.name)+": "+e._s(t.job.getScore())+" ")])})),0),i("td",[i("button",{attrs:{type:"button"},on:{click:function(i){return i.preventDefault(),e.assign(e.selectedCitizen.id,t.id)}}},[e._v("Assign")])])])})),0)])])},Q=[],X=(i("4de4"),i("d81d"),function(){function e(t,i,n,r){Object(m["a"])(this,e),Object(p["a"])(this,"id",void 0),Object(p["a"])(this,"name",void 0),Object(p["a"])(this,"primarySkill",void 0),Object(p["a"])(this,"secondarySkill",void 0),Object(p["a"])(this,"primarySkillLevel",void 0),Object(p["a"])(this,"secondarySkillLevel",void 0),this.id=t,this.name=i,this.primarySkill=n,this.secondarySkill=r}return Object(f["a"])(e,[{key:"setCitizenLevels",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,this.primarySkill))throw new Error("Citizen skills object does not contain required skill: ".concat(this.primarySkill));if(this.primarySkillLevel=e[this.primarySkill],this.secondarySkill){if(!Object.prototype.hasOwnProperty.call(e,this.secondarySkill))throw new Error("Citizen skills object does not contain required skill: ".concat(this.secondarySkill));this.secondarySkillLevel=e[this.secondarySkill]}}},{key:"getScore",value:function(){return this.secondarySkill?2*parseInt(this.primarySkillLevel)+parseInt(this.secondarySkillLevel):2*parseInt(this.primarySkillLevel)}}],[{key:"fromJob",value:function(t){return new e(t.id,t.name,t.skills.primary,t.skills.secondary)}},{key:"compareByScore",value:function(e,t){return e.getScore()===t.getScore()?0:e.getScore()<t.getScore()}}]),e}()),Y={name:"AssignmentModal",components:{Modal:L},props:{selectedCitizen:{type:b,required:!0},citizens:{type:Array,required:!0}},data:function(){var e=this;return{citizenJobs:y.map((function(t){var i=X.fromJob(t);return i.setCitizenLevels(e.selectedCitizen.skills),i})).sort(X.compareByScore)}},computed:{otherCitizens:function(){var e=this;return this.citizens.filter((function(t){return t.id!==e.selectedCitizen.id}))}},methods:{closeForm:function(){this.$store.dispatch("jobs/selectToAssign",null)},findJobById:function(e){return h(e)},getWorkerForJob:function(e){return this.otherCitizens.filter((function(t){return t.job===e.id})).map((function(t){var i=X.fromJob(e);return i.setCitizenLevels(t.skills),{id:t.id,name:t.name,job:i}}))},assign:function(e,t){var i=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.$store.dispatch("citizens/assignJob",{citizenId:e,jobId:t});case 2:case"end":return n.stop()}}),n)})))()}}},Z=Y,ee=(i("a063"),Object(g["a"])(Z,K,Q,!1,null,"034d8334",null)),te=ee.exports,ie=i("2f62"),ne={name:"App",components:{EditCitizenForm:W,CitizenList:x,NewCitizenForm:R,JobAssignmentModal:te},data:function(){return{isNewCitizenFormVisible:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(ie["b"])("citizens",["citizens","editedCitizen"])),Object(ie["b"])("jobs",{selectedCitizenForAssignment:function(e){return e.selectedCitizen}})),methods:{showNewCitizenForm:function(){this.isNewCitizenFormVisible=!0}}},re=ne,ae=(i("034f"),Object(g["a"])(re,r,a,!1,null,null,null)),se=ae.exports,oe=(i("7db0"),i("c975"),i("a434"),i("d3b7"),i("15fd")),le="mc-citizen-list",ce={uid:0,save:function(e){var t=e.map((function(e){return e.toJson()}));localStorage.setItem(le,JSON.stringify(t))},fetchAll:function(){var e=JSON.parse(localStorage.getItem(le)||"[]"),t=[];return e.forEach((function(e,i){e.id=i,t.push(b.fromJson(e))})),ce.uid=t.length,t}},ue=ce,de={namespaced:!0,state:function(){return{citizens:ue.fetchAll(),editedCitizen:null}},getters:{findById:function(e){return function(t){return e.citizens.find((function(e){return e.id===t}))}}},mutations:{create:function(e,t){e.citizens.push(t),ue.save(e.citizens)},update:function(e,t){var i=t.citizen,n=t.payload,r=e.citizens.indexOf(i);n.name&&(i.name=n.name),n.job&&(i.job=n.job),n.skills&&(i.skills=n.skills),e.citizens[r]=i,ue.save(e.citizens)},deleteAtIndex:function(e,t){e.citizens.splice(t,1),ue.save(e.citizens)},setEditedCitizen:function(e,t){e.editedCitizen=t}},actions:{add:function(e,t){var i=t.name,n=t.job,r=t.skills;return new Promise((function(t){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(r[a]=parseInt(r[a]));var s=new b(ue.uid++,i,r);return s.job=n&&k(n)?n:null,e.commit("create",s),t()}))},remove:function(e,t){return new Promise((function(i,n){var r=e.getters.findById(t);if(null===r)return n("Could not find citizen in database");var a=e.state.citizens.indexOf(r);return e.commit("deleteAtIndex",a),i()}))},edit:function(e,t){var i=t.citizenId,n=Object(oe["a"])(t,["citizenId"]);return new Promise((function(t,r){var a=e.getters.findById(i);if(null===a)return r("Could not find citizen in database");if(n.name&&(n.name=n.name.trim()),n.skills)for(var s in n.skills)Object.prototype.hasOwnProperty.call(n.skills,s)&&(n.skills[s]=parseInt(n.skills[s]));return n.job&&(n.job=k(n.job)?n.job:null),e.commit("update",{citizen:a,payload:n}),t()}))},selectToEdit:function(e,t){return new Promise((function(i,n){if(null===t)return e.commit("setEditedCitizen",null),i();var r=e.getters.findById(t);return null===r?n("Could not find citizen in database"):(e.commit("setEditedCitizen",r),i())}))},assignJob:function(e,t){var i=t.citizenId,n=t.jobId;return new Promise((function(t,r){var a=e.getters.findById(i);return null===a?r("Could not find citizen in database"):k(n)?(e.commit("update",{citizen:a,payload:{job:n}}),t()):r('Could not find job "'.concat(n,'"'))}))}}},me={namespaced:!0,state:function(){return{selectedCitizen:null}},mutations:{setSelectedCitizen:function(e,t){e.selectedCitizen=t}},actions:{selectToAssign:function(e,t){return new Promise((function(i,n){if(null===t)return e.commit("setSelectedCitizen",null),i();var r=e.rootGetters["citizens/findById"](t);return null===r?n("Could not find citizen in database"):(e.commit("setSelectedCitizen",r),i())}))}}};n["a"].use(ie["a"]);var fe=new ie["a"].Store({strict:!0,modules:{citizens:de,jobs:me}}),pe={inserted:function(e){e.focus()}};n["a"].directive("focus",pe),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(se)},store:fe}).$mount("#app")},"85ec":function(e,t,i){},a063:function(e,t,i){"use strict";var n=i("067f"),r=i.n(n);r.a},aeff:function(e,t,i){},b489:function(e,t,i){},be87:function(e,t,i){},e088:function(e,t,i){"use strict";var n=i("b489"),r=i.n(n);r.a}});
//# sourceMappingURL=app.2e2167e6.js.map